image: python:3.7

variables:
  SDL_VIDEODRIVER: "dummy"

before_script:
  - python3 -m venv env
  - source env/bin/activate
  - pip3 install -r requirements.txt

lint:
  script:
    - flake8 --ignore=E501,F,W lib/*.py main.py

run_test:
  script:
    - pytest -v lib/test.py

dry_run:
  script:
    - python3 main.py -r 10 -c
    - python3 main.py -r 30 -c -d -p -i -f
    - python3 main.py --dryrun 30 --camera --debug --performance
